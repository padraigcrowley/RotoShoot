using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;
using TMPro;
using UnityEngine.SceneManagement;

public class UIManager : Singleton<MyGameplayManager>
{
  public TextMeshProUGUI HighPlayerScoreText,CurrentPlayerScoreText, CurrentEnemyKillCount, RequiredEnemyKillCount, levelPlayTimeCounterText;
  public Button gameRestartButton, gameExitButton;
  public Image playerHealthHeart03, playerHealthHeart02, playerHealthHeart01;

  // Start is called before the first frame update
  void Start()
  {
    CurrentPlayerScoreText.text = MyGameplayManager.Instance.currentPlayerScore.ToString();
    HighPlayerScoreText.text = MyGameplayManager.Instance.highPlayerScore.ToString();
  }

  // Update is called once per frame
  void Update()
  {
    
    if (MyGameplayManager.Instance.currentGameState == MyGameplayManager.GameState.MISSION_IN_PROGRESS)
    {
      CurrentPlayerScoreText.text = (MyGameplayManager.Instance.currentPlayerScore).ToString();
      HighPlayerScoreText.text = "HI:" + MyGameplayManager.Instance.highPlayerScore.ToString();
      levelPlayTimeCounterText.text = MyGameplayManager.Instance.levelPlayTimeElapsed.ToString("0.00");

    }
    else if (MyGameplayManager.Instance.currentGameState == MyGameplayManager.GameState.GAME_OVER_SCREEN)
    {
      gameRestartButton.gameObject.SetActive(true);
      gameExitButton.gameObject.SetActive(true);
    }

    if (MyGameplayManager.Instance.currentPlayerHP == 3)
    {
      playerHealthHeart03.enabled = true;
      playerHealthHeart02.enabled = true;
      playerHealthHeart01.enabled = true;
    }
    else if (MyGameplayManager.Instance.currentPlayerHP == 2)
    {
      playerHealthHeart03.enabled = false;
    }
    else if (MyGameplayManager.Instance.currentPlayerHP == 1)
    {
      playerHealthHeart02.enabled = false;
    }
    else if (MyGameplayManager.Instance.currentPlayerHP == 0)
    {
      playerHealthHeart01.enabled = false;
    }

  }

  public void handleGameRestartButtonPress()
  {
    print("Start Button Pressed!");
    CurrentPlayerScoreText.text = "0";
    MyGameplayManager.Instance.currentGameState = MyGameplayManager.GameState.MISSION_INTRO_IN_PROGRESS;
    gameRestartButton.gameObject.SetActive(false);
    gameExitButton.gameObject.SetActive(false);
    MyGameplayManager.Instance.initializeMainGameplayLoop();
  }

  public void handleGameExitButtonPress()
  {
    SceneManager.LoadScene("MainMenu");
  }

  }
